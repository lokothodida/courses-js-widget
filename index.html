<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<link type="text/css" rel="stylesheet" media="all" href="example.css" />
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js" type="text/javascript"></script>
<script src="dataTables/js/jquery.dataTables.min.js" type="text/javascript"></script>
<script src="jsDump-1.0.0.js" type="text/javascript"></script>
<script src="courses.js" type="text/javascript"></script>
<script type="text/javascript" src="http://static.data.ox.ac.uk/jquery-ui/js/jquery-ui-1.8.22.custom.min.js"></script>
<script type="text/javascript" src="http://static.data.ox.ac.uk/api-1.0.js"></script>
<link type="text/css" rel="stylesheet" media="all" href="http://static.data.ox.ac.uk/jquery-ui/css/smoothness/jquery-ui-1.8.22.custom.css"/>
<style type="text/css">
dt { font-weight: bold }
</style>
</head>
<body>
	<div id="_debug"></div>
	
	<div id="main">
		<div id="sidebar-one">
			<div class="courses-widget-container small" data-title="Courses" data-displayColumns="title start" data-unit="http://oxpoints.oucs.ox.ac.uk/id/23232568" data-skill="GT"></div>
		</div>
		<div id="content">
		<h1>Course Listings Widget</h1>

<h2>Selection criteria</h2>

<p>The course listings widget displays courses that match criteria set by the webpage designer.</p>
<p>To set criteria add attributes to the div:</p>

<dl>
<dt>data-providedBy</dt>
<dd><dl>
<dt>Filters on:</dt>
<dd>units (divisions or departments) offering the course</dd>
<dt>Value:</dt>
<dd>oxpoints uri of the unit</dd>
<dt>Default:</dt>
<dd>"http://oxpoints.oucs.ox.ac.uk/id/00000000" (University of Oxford)
<p id="unit-note"><strong>Please note:</strong> if no unit is specified, the widget will display all courses offered by the University. This is a very large list that will take a long time to fetch. <!-- To find a unit's oxpoints uri, use the widget below. --></p>
</dd>
<dt>Example:</dt>
<dd>data-providedBy = "http://oxpoints.oucs.ox.ac.uk/id/00000000"</dd>
</dl>
</dd>
<dt>data-startingAfter</dt>
<dd>
<dl>
<dt>Filters on:</dt>
<dd>courses starting after a date</dd>
<dt>Value:</dt>
<dd>Format: YYYY-MM-DDT00:00:00 or "now"</dd>
<dt>Example:</dt>
<dd>data-startingAfter = "2013-01-01T00:00:00"</dd>
</dl>
</dd>
<dt>data-startingBefore</dt>
<dd>
<dl>
<dt>Filters on:</dt>
<dd>courses starting before a date</dd>
<dt>Value:</dt>
<dd>Format: YYYY-MM-DDT00:00:00</dd>
<dt>Example:</dt>
<dd>data-startingBefore = "2013-01-01T00:00:00"</dd>
</dl>
</dd>
<dt>data-skill OR data-researchMethod</dt>
<dd>
<dl>
<dt>Filters on:</dt>
<dd>courses in a particular skill area or a quantitative or qualitative research method</dd>
<dt>Value:</dt>
<dd>ox-rdf or ox-rm code</dd>
<td>Example:</dt>
<dd>data-skill = "GT"</dd>
</dl>
</dd>
<dt>data-eligibility</dt>
<dd>
<dl>
<dt>Filters on:</dt>
<dd>who is eligible to book</dd>
<dt>Value:</dt>
<dd>format: a space separated list of the following:
<ul>
<li>ST: staff</li>
<li>OX: members of the University</li>
<li>PU: public</li>
</ul>
</dd>
<dt>Default:</dt>
<dd>"ST OX PU"</dd>
<dt>Example:</dt>
<dd>data-eligibility = "OX PU"</dd>
</dl>
</dd>
</dl>

<h2>Columns to display</h2>

<p>To choose which columns to display in the table (and their order), use the <tt>data-displayColumns</tt> attribute to provide a space-separated list of columns. The order in which they are given in the attribute is the order in which they will appear. Columns available are:
<ul>
<li>start</li>
<li>title</li>
<li>subject</li>
<li>provider</li>
<li>description</li>
<li>venue</li>
<li>eligibility</li>
<li>info</li>
</ul>
For example, to display only the start date, course title and venue, use <tt>data-displayColumns="start title venue"</tt>.</p>



  <h2>Oxpoints URI finder</h2>
  <p>Start typing the name of a unit to get its oxpoints URI:</p>
  <input id="autocomplete-with-callback" class="dataox-autocomplete" data-autocomplete-type="organization">

<div id="autocomplete-with-callback-metadata"></div>
      <script type="text/javascript">
        $(function() {
        	dataox.autocomplete("autocomplete-with-callback", {
        		select: function(event, ui) {
        			var dl = $('<dl>');
        			var metadata = $('#autocomplete-with-callback-metadata').empty().append(dl);
        			if (ui.item.uri) {
        				
        				dl.append($('<dt>').text('OXPoint URI:'))
        				  .append($('<dd>').html(ui.item.uri));
        			}
         		}
        	});
        });
      </script>
<!--

<p>applyTo is the public URL NOT the memberApplyTo URL. It should probably open in a new window.</p>

<p>You can fetch status from the oxcap:status attribute on the <presentation> element. 'CN' indicates a course has been cancelled. I'm not sure whether 'Notes' is the right column heading - this column will hardly ever be used and maybe there is a better way of indicating a course has been cancelled.</p>

<p>What about pagination? Would it be possible to list 50 courses and then have a link to 'Next 50'?</p>

<p>What about courses with no dates? Would it be possible to have a link to a similar display of courses without dates. The SES tool in WebLearn has this.</p>

<p>There should be an extended display where the columns and their order can be configured.</p>

<p>The full list of columns:</p>
<ul>
<li>start date (course >> presentation >> start |dtf attribute or course >> presentation >> start if no dtf attribute - this on page with no dates)</li>
<li>title (which is hyperlink ending up at publicApplyTo URL) with optional 'Cancelled' label (see above) (course >> presentation >> title, and course >> presentation >> applyTo and course >> presentation | oxcap:status attribute)</li>
<li>provider (provider >> title)</li>
<li>venue or venue text (as hyperlink to oxpoints) (course >> presentation >> venue)</li>
<li>Eligibility (course >> presentation >> regulations | oxcap:eligibility attribute</li>
<li>More info (URL) (course >> URL)</li>
</ul>
</p>
-->


<div class="courses-widget-container" data-title="Courses" data-displayColumns="title venue provider start" data-providedBy="http://oxpoints.oucs.ox.ac.uk/id/23232639"></div>
		</div>
		
		<div id="debug"></div>	
	</div>
</body>
</html>
